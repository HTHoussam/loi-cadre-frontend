<div class="mouvement-list">
  <h1>Mouvements</h1>
  <form [formGroup]="filterForm" class="filters">
    <select formControlName="selectedLoiCadre">
      <option [value]="null">Toutes les lois</option>
      <option *ngFor="let loi of lois" [value]="loi.id">{{ loi.annee }} - {{ loi.version }}</option>
    </select>
    <select formControlName="selectedPoste">
      <option [value]="null">Tous les postes</option>
      <option *ngFor="let poste of postes" [value]="poste.id">{{ poste.codePoste }}</option>
    </select>
    <select formControlName="selectedType">
      <option [value]="null">Tous les types</option>
      <option *ngFor="let type of types" [value]="type">{{ type }}</option>
    </select>
  </form>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Poste</th>
        <th>Description</th>
        <th>Date d'effet</th>
        <th>Loi Cadre</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let mouvement of mouvements">
        <td>{{ mouvement.type }}</td>
        <td>{{ mouvement.posteConcerne?.codePoste }}</td>
        <td>{{ mouvement.description }}</td>
        <td>{{ mouvement.dateEffet }}</td>
        <td>{{ mouvement.loiCadre?.annee }} - {{ mouvement.loiCadre?.version }}</td>
        <td>
          <button [routerLink]="['/mouvement/edit', mouvement.id]">Modifier</button>
          <button *ngIf="mouvement.id !== undefined" (click)="delete(mouvement.id)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button [routerLink]="['/mouvement/create']">Nouveau Mouvement</button>
</div>